/* ───────────────────────────────────────────────────────────────
   Pitext Calendar – Dark Theme v2  (2025‑07‑01)
   • Removes purple gradient side‑bars by forcing a flat black body background
   • Inverts calendar grid (white cells, black text)
   • Keeps yellow accent + dark panels elsewhere
   Place file at: calendar_integration/static/css/calendar-dark-theme.css
   ─────────────────────────────────────────────────────────────── */

/* ===== 1. Brand tokens ======================================= */
:root {
  --pitext-accent: #facf0f;          /* signature yellow */
  --pitext-bg: #000000;              /* deepest background */
  --pitext-bg-alt: #0e0e0e;          /* panel background */
  --pitext-text-dark: #000000;
  --pitext-text-light: #ffffff;
  --pitext-border-radius: 8px;
  --pitext-glow: 0 0 8px var(--pitext-accent);
}

/* ===== 2. Global background override ======================== */
/* Force‑override any page‑level gradient so side bars disappear */
html, body, #app, .page-wrapper, .layout, .container-fluid {
  background: var(--pitext-bg) !important;
  color: var(--pitext-text-light);
  font-family: "Inter", system-ui, sans-serif;
}

/* Optional: comment the lightbulb overlay back in if you want it */
/* .lightbulb-bg { … } */

/* ===== 3. FullCalendar header ================================= */
.fc-toolbar-title {
  color: var(--pitext-accent);
  font-weight: 600;
}

.fc-button {
  background: #5667d7;                  /* muted indigo same as desktop UI */
  color: var(--pitext-text-light);
  border: none;
  border-radius: var(--pitext-border-radius);
  padding: 0.35rem 0.75rem;
  box-shadow: var(--pitext-glow);
  transition: filter .15s ease-in;
}
.fc-button-primary:not(:disabled):hover,
.fc-button-primary:not(:disabled):focus {
  filter: brightness(1.1);
}

/* ===== 4. Grid swap: white cells / black text =============== */
.fc-daygrid-day, .fc-timegrid-col {
  background-color: #ffffff;
  color: var(--pitext-text-dark);
}

.fc-day-other {
  background-color: #fafafa;            
  color: var(--pitext-text-dark) !important;  /* Fixed: was rgba(0,0,0,0.25) */
}

.fc-col-header-cell {
  background-color: #ffffff;
  color: var(--pitext-text-dark);
  font-weight: 600;
}

.fc-daygrid-day-number, .fc-timegrid-slot-label {
  color: var(--pitext-text-dark) !important;
}

/* Fix for "all-day" text visibility */
.fc-timegrid-divider,
.fc-timegrid-divider-cushion,
.fc-daygrid-day-events,
.fc-col-header-cell-cushion,
.fc-timegrid-axis-cushion {
  color: var(--pitext-text-dark) !important;
  font-weight: 600 !important;
}
/* ===== 5. Event chips ======================================= */
.fc-event {
  background-color: var(--pitext-accent);
  color: var(--pitext-text-dark);
  border: none;
  border-radius: var(--pitext-border-radius);
  font-weight: 500;
  box-shadow: 0 1px 2px rgba(0,0,0,0.4);
}
.fc-event[data-type="echo"] {
  background-image: linear-gradient(135deg, var(--pitext-accent) 0%, #ff758c 100%);
  color: var(--pitext-text-light);
}

.fc-event[data-type="fun"],
.event-fun {
  background-color: #e91e63;
  color: #fff;
}

/* ===== 6. Modal ============================================ */
.modal-content {
  background: rgba(14,14,14,0.96);
  backdrop-filter: blur(8px);
  border: 1px solid var(--pitext-accent);
  border-radius: calc(var(--pitext-border-radius) * 1.25);
  color: var(--pitext-text-light);
}
.modal-header .modal-title {
  color: var(--pitext-accent);
}
.btn-primary {
  background: var(--pitext-accent);
  border: none;
  color: var(--pitext-text-dark);
}
.btn-primary:hover { filter: brightness(1.1); }

/* ===== 7. Mermaid flowchart shapes ========================= */
.mermaid svg .cluster.dateBox > rect,
.mermaid svg .node rect {
  fill: var(--pitext-bg-alt) !important;
  stroke: var(--pitext-accent) !important;
  stroke-width: 1.6px;
  rx: var(--pitext-border-radius); ry: var(--pitext-border-radius);
}
.mermaid svg .edgePath path { stroke: var(--pitext-accent) !important; }

/* Make event node backgrounds light and text dark for visibility */
.mermaid svg .node rect {
  fill: #fff !important;         /* Light background */
  stroke: #facf0f !important;    /* Yellow border for accent */
  stroke-width: 1.6px;
  rx: var(--pitext-border-radius);
  ry: var(--pitext-border-radius);
}
.mermaid .nodeLabel {
  fill: #222 !important;         /* Dark text for contrast */
  color: #222 !important;
  font-weight: 600;
}

/* ===== 8. Scrollbar (WebKit) ================================ */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-thumb {
  background: var(--pitext-accent);
  border-radius: 4px;
}

/* ===== 9. Utility classes ==================================== */
.text-accent   { color: var(--pitext-accent) !important; }
.bg-panel      { background: var(--pitext-bg-alt) !important; }
.rounded-soft  { border-radius: var(--pitext-border-radius) !important; }
.shadow-glow   { box-shadow: var(--pitext-glow) !important; }

/* No changes needed unless min-height or padding is found on main containers. If found, reduce by 70%. */

/* ===== Event Type Filter Box (Dark Theme) ================ */
#calendar-filters {
    border-color: var(--pitext-accent) !important;
    background: rgba(250, 207, 15, 0.08) !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3) !important;
}
#calendar-filters::before {
    color: var(--pitext-accent) !important;
}
#calendar-filters label {
    color: var(--pitext-accent) !important;
}
#calendar-filters label:hover {
    color: #fff !important;
    text-shadow: 0 0 4px var(--pitext-accent);
}
#calendar-filters input[type="checkbox"] {
    accent-color: var(--pitext-accent) !important;
    filter: brightness(1.2);
}

.fc-scrollgrid-section > * {
  border-left: 1px solid var(--fc-border-color) !important;
}

/* ===== 9.5 Sleep Toggle Bars (Dark Theme) ================ */
.sleep-toggle-bar {
  background: var(--pitext-bg-alt) !important;
  border-color: #444 !important;
  color: var(--pitext-accent) !important;
}

.early-sleep-toggle-bar {
  box-shadow: 0 2px 8px rgba(0,0,0,0.5) !important;
}

.late-sleep-toggle-bar {
  box-shadow: 0 -2px 8px rgba(0,0,0,0.5) !important;
}

.sleep-toggle-bar:hover {
  background: #1a1a1a !important;
  color: #fff !important;
  border-color: var(--pitext-accent) !important;
}
